<header class="site-header" id="mainHeader">
  <div class="container header-row">
    <a class="brand" href="#home">
      <img src="assets/images/logo.png" alt="Bioenergy Arabia logo" />
    </a>
    <nav aria-label="Primary">
      <ul class="menu">
        <li><a href="#home" id="nav-home">HOME</a></li>
        <li><a href="#about-us" id="nav-about">ABOUT US</a></li>
        <li><a href="#our-products" id="nav-products">PRODUCTS AND SERVICES</a></li>
        <li><a href="#our-team" id="nav-team">OUR TEAM</a></li>
        <li><a href="#contact-us" id="nav-contact">CONTACT US</a></li>
      </ul>
    </nav>
  </div>
</header>

<script>
(function () {
  // Shrinking header on scroll
  const header = document.getElementById('mainHeader');
  let lastScroll = 0;

  function handleScroll() {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll > 50) {
      header.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
    }
    
    lastScroll = currentScroll;
  }

  window.addEventListener('scroll', handleScroll);

  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        const headerHeight = header.offsetHeight;
        const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - headerHeight - 20;
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });

  // Highlight active section on scroll
  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('.menu a[href^="#"]');

  function highlightNav() {
    let current = '';
    const headerHeight = header.offsetHeight;
    
    sections.forEach(section => {
      const sectionTop = section.offsetTop - headerHeight - 50;
      const sectionHeight = section.clientHeight;
      if (pageYOffset >= sectionTop) {
        current = section.getAttribute('id');
      }
    });

    navLinks.forEach(link => {
      link.removeAttribute('aria-current');
      if (link.getAttribute('href') === `#${current}`) {
        link.setAttribute('aria-current', 'page');
      }
    });
  }

  window.addEventListener('scroll', highlightNav);
  
  // Set home as active by default on page load
  const homeLink = document.querySelector('#nav-home');
  if (homeLink && (window.location.pathname.includes('index.html') || window.location.pathname === '/')) {
    homeLink.setAttribute('aria-current', 'page');
  }
})();
</script>
